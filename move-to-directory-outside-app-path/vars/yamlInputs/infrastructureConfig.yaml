## Copyright 2021 Green River IT (GreenRiverIT.com) as described in LICENSE.txt distributed with this project on GitHub.  
## Start at https://github.com/AgileCloudInstitute?tab=repositories    

cloud: azure
dependencies:
  - name: azure-cli
    version: "2.17"
    download-link-windows: 
    download-link-linux:
    modules:
    - name: azure-cli-ext-azure-devops
      version: "0.18"
  - name: git
    version: "2.27"
    download-link-windows: https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.27.0.tar.gz
    download-link-linux:
    checksums: 
      - url: https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.27.0.tar.sign
      - url: https://mirrors.edge.kernel.org/pub/software/scm/git/git-2.27.0.tar.xz
  - name: terraform
    version: "0.14"
    download-link-windows: https://releases.hashicorp.com/terraform/0.14.3/terraform_0.14.3_windows_amd64.zip
    download-link-linux: https://releases.hashicorp.com/terraform/0.14.3/terraform_0.14.3_linux_amd64.zip
    checksums:
      - url: https://releases.hashicorp.com/terraform/0.14.3/terraform_0.14.3_SHA256SUMS
      - url: https://releases.hashicorp.com/terraform/0.14.3/terraform_0.14.3_SHA256SUMS.348FFC4C.sig
      - url: https://releases.hashicorp.com/terraform/0.14.3/terraform_0.14.3_SHA256SUMS.72D7468F.sig
      - url: https://releases.hashicorp.com/terraform/0.14.3/terraform_0.14.3_SHA256SUMS.sig
  - name: packer
    version: "1.7"
    download-link-windows: https://releases.hashicorp.com/packer/1.7.3/packer_1.7.3_windows_amd64.zip
    download-link-linux: https://releases.hashicorp.com/packer/1.7.3/packer_1.7.3_linux_amd64.zip
    checksums: 
      - url: https://releases.hashicorp.com/packer/1.7.3/packer_1.7.3_SHA256SUMS
      - url: https://releases.hashicorp.com/packer/1.7.3/packer_1.7.3_SHA256SUMS.sig
source:
  - instanceName: azure-building-blocks
    repo: https://github.com/AgileCloudInstitute/azure-building-blocks.git
    branch: dev
  - instanceName: aws-building-blocks
    repo: https://github.com/AgileCloudInstitute/aws-building-blocks.git
    branch: dev
admin:
  instanceName: netadmin
  templateName: azure-building-blocks/terraform/ad-admin
  appName: someApp
  tool: terraform
tags:
  networkName: name-of-vnet
  systemName: name-of-system
  environmentName: name-of-environment
  ownerName: name-of-owner
networkFoundation:
  instanceName: demo
  templateName: azure-building-blocks/terraform/network-foundation
  tool: terraform
  region: "West US"
imageBuilds:
  subnetForBuilds:
    instanceName: packer-demo
    templateName: azure-building-blocks/terraform/snet-packer
    tool: terraform
    cidrSubnet: 10.0.9.0/24
  images:
    - instanceName: RHEL73_AZDO_Agent
      templateName: azure-building-blocks/packer/rhel7-azure-arm-azdo-agent
      tool: packer
      ssh_user: packer
      ssh_pass: just-me-123
      init_script: azure-building-blocks/scripts/rhel7-startup-azdo-agent.sh
systems:
  subnetsWithScaleSet:
    - instanceName: azdoAgents
      templateName: azure-building-blocks/terraform/snet-agents
      tool: terraform
      imageName: RHEL73_AZDO_Agent
      cidrSubnet: 10.0.6.0/24
      vmUserName: azureuser
      vmPwd: abc-some-pwd-123
      vaultName: agentsVault
      cloudInit: azure-building-blocks/scripts/startup-script-demo.sh
projectManagement:
  projects:
    - instanceName: ACM_ExampleProject
      templateName: azure-building-blocks/terraform/azdo-project
      tool: terraform
      code:
        - instanceName: ACM_ExampleCode
          templateName: azure-building-blocks/terraform/azdo-code
          tool: terraform
          sourceRepo: https://github.com/AgileCloudInstitute/agile-cloud-manager.git
          buildName: ACM_ExampleCode
          endpointTemplate: azure-building-blocks/api/azdo-service-conn-other-git.json
releaseDefinition:
  releaseDefinitions:
    - instanceName: ACM_DemoRelease
      projectName: ACM_ExampleProject
      vaultName: agentsVault
      YamlDefinitionFileName: ACM_DemoRelease.yaml
      repositories:
        - instanceName: ACM_ExampleCode